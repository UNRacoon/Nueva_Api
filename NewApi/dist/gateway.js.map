{"version":3,"sources":["../src/gateway.js"],"names":["ApolloServer","ApolloGateway","express","dotenv","fs","https","config","uri","process","env","URI","ssl","port","hostname","gateway","serviceList","name","url","__exposeQueryPlanExperimental","apollo","engine","playground","subscriptions","app","applyMiddleware","server","createServer","key","readFileSync","cert","listen","console","log","graphqlPath"],"mappings":"AAAA,SAASA,YAAT,QAA6B,uBAA7B;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAF,MAAM,CAACG,MAAP;AAEA,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,GAAxB;AAEA,MAAMJ,MAAM,GAAG;AAAEK,EAAAA,GAAG,EAAE,IAAP;AAAaC,EAAAA,IAAI,EAAE,IAAnB;AAAyBC,EAAAA,QAAQ,EAAE;AAAnC,CAAf;AAEA,MAAMC,OAAO,GAAG,IAAIb,aAAJ,CAAkB;AAC9Bc,EAAAA,WAAW,EAAE,CACT;AAAEC,IAAAA,IAAI,EAAE,OAAR;AAAiBC,IAAAA,GAAG,EAAG,UAASV,GAAI;AAApC,GADS,EAET;AAAES,IAAAA,IAAI,EAAE,YAAR;AAAsBC,IAAAA,GAAG,EAAG,UAASV,GAAI;AAAzC,GAFS,CADiB;AAI3B;AACHW,EAAAA,6BAA6B,EAAE;AALD,CAAlB,CAAhB;AAQA,MAAMC,MAAM,GAAG,IAAInB,YAAJ,CAAiB;AAC5Bc,EAAAA,OAD4B;AAE5BM,EAAAA,MAAM,EAAE,KAFoB;AAG5BC,EAAAA,UAAU,EAAE,IAHgB;AAI5BC,EAAAA,aAAa,EAAE;AAJa,CAAjB,CAAf;AAOA,MAAMC,GAAG,GAAGrB,OAAO,EAAnB;AACAiB,MAAM,CAACK,eAAP,CAAuB;AAAED,EAAAA;AAAF,CAAvB;AAEA,IAAIE,MAAM,GAAKA,MAAM,GAAGpB,KAAK,CAACqB,YAAN,CACpB;AACIC,EAAAA,GAAG,EAAEvB,EAAE,CAACwB,YAAH,CAAiB,iBAAjB,CADT;AAEIC,EAAAA,IAAI,EAAEzB,EAAE,CAACwB,YAAH,CAAiB,iBAAjB;AAFV,CADoB,EAKpBL,GALoB,CAAxB;AAQAE,MAAM,CAACK,MAAP,CAAc;AAAElB,EAAAA,IAAI,EAAEN,MAAM,CAACM;AAAf,CAAd,EAAqC,MACjCmB,OAAO,CAACC,GAAR,CACI,oBADJ,EAEK,OAAM1B,MAAM,CAACK,GAAP,GAAa,GAAb,GAAmB,EAAG,MAAKL,MAAM,CAACO,QAAS,IAAGP,MAAM,CAACM,IAAK,GAC7DO,MAAM,CAACc,WACV,EAJL,CADJ","sourcesContent":["import { ApolloServer } from \"apollo-server-express\";\r\nimport { ApolloGateway } from \"@apollo/gateway\";\r\nimport express from \"express\";\r\nimport dotenv from \"dotenv\";\r\nimport fs from \"fs\";\r\nimport https from \"https\";\r\n\r\ndotenv.config();\r\n\r\nconst uri = process.env.URI;\r\n\r\nconst config = { ssl: true, port: 5000, hostname: \"localhost\" };\r\n\r\nconst gateway = new ApolloGateway({\r\n    serviceList: [\r\n        { name: \"exams\", url: `http://${uri}:3000` },\r\n        { name: \"vocabulary\", url: `http://${uri}:4000` },\r\n    ], //Aqui se agregan los microcervicios con puertos diferentes 5001, 5002, 5003... y se crea su respectiva carpeta en services\r\n    __exposeQueryPlanExperimental: true,\r\n});\r\n\r\nconst apollo = new ApolloServer({\r\n    gateway,\r\n    engine: false,\r\n    playground: true,\r\n    subscriptions: false,\r\n});\r\n\r\nconst app = express();\r\napollo.applyMiddleware({ app });\r\n\r\nlet server = ( server = https.createServer(\r\n    {\r\n        key: fs.readFileSync(`./localhost.key`),\r\n        cert: fs.readFileSync(`./localhost.crt`),\r\n    },\r\n    app\r\n));\r\n\r\nserver.listen({ port: config.port }, () =>\r\n    console.log(\r\n        \"ðŸš€ Server ready at\",\r\n        `http${config.ssl ? \"s\" : \"\"}://${config.hostname}:${config.port}${\r\n            apollo.graphqlPath\r\n        }`\r\n    )\r\n);\r\n"],"file":"gateway.js"}